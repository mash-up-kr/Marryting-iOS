//
//  MyGuestListPresenter.swift
//  
//
//  Created by Woody on 2022/07/17.
//  Copyright (c) 2022 ___ORGANIZATIONNAME___. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

protocol MyGuestListPresentationLogic {
    func presentMyLikeGuests(response: MyGuestList.FetchMyLikeGuests.Response)
    func presentMatchingGuests(response: MyGuestList.FetchMatchingGuests.Response)
}

final class MyGuestListPresenter: MyGuestListPresentationLogic {
    weak var viewController: MyGuestListDisplayLogic?
    
    // MARK: Presentation Logic

    func presentMyLikeGuests(response: MyGuestList.FetchMyLikeGuests.Response) {
        self.viewController?.displayMyLikeGuests(
            viewModel: .init(
                myLikeGuestCellViewModels: response.guests
                    .map {
                        .init(myGuestCardViewModel:
                                .init(
                                    id: $0.user.id,
                                    imageUrl: $0.user.picture,
                                    name: $0.user.name,
                                    age: $0.user.age,
                                    address: $0.user.address,
                                    career: $0.user.career,
                                    isLiked: $0.isLiked
                                )
                        )
                    }
            )
        )
    }

    func presentMatchingGuests(response: MyGuestList.FetchMatchingGuests.Response) {
        self.viewController?.displayMatchingGuests(
            viewModel:
                    .init(
                        matchingGuestCellViewModels: response.guests
                            .map {
                                .init(myGuestCardViewModel:
                                        .init(
                                            id: $0.guest.user.id,
                                            imageUrl: $0.guest.user.picture,
                                            name: $0.guest.user.name,
                                            age: $0.guest.user.age,
                                            address: $0.guest.user.address,
                                            career: $0.guest.user.career,
                                            isLiked: $0.guest.isLiked
                                        ),
                                      dialog:
                                        .init(loveMent: $0.loveMent)
                                )
                            }
                    )
        )
    }

}
